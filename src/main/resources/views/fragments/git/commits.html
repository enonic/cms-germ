<section
    data-th-fragment="table(commits)"
    data-th-if="${commits!=null}"
    id="git-commits">

    <table id="commits" class="pure-table pure-table-bordered pure-table-striped commits">
        <thead>
        <tr>
            <th>Sha1</th>
            <th>Time</th>
            <th>Committer name</th>
            <th>Committer e-mail</th>
            <th class="comment">Comment</th>
        </tr>
        </thead>
        <tr data-th-each="commit : ${commits}"
            data-th-if="${commit!=null}"
            data-th-with="thisCommit=${#strings.substring(commit.getId().toString().split(' ')[1],0,16)}">
        <span data-th-switch="${thisCommit}">
            <td data-th-case="${headCommit}"
                data-th-text="${#strings.substring(thisCommit,0,16)}"
                data-th-class="'head-commit'"/>
            <td data-th-case="*"
                data-th-text="${#strings.substring(thisCommit,0,16)}"
                data-th-class="''"/>
        </span>

            <td><span data-th-text="${commit.getCommitterIdent().getWhen()}"/></td>
            <td><span data-th-text="${commit.getCommitterIdent().getName()}"/></td>
            <td><span data-th-text="${commit.getCommitterIdent().getEmailAddress()}"/></td>
            <td data-th-text="${commit.getFullMessage()}">No commit message</td>
        </tr>
    </table>
    <script type="text/javascript">
        var s,
        JiraLinks = {
            settings: {
                jiraUrl: 'http://issues',
                commitsComment: document.getElementById('commits')
            },

            init: function(){
                s = this.settings;
                this.bindUIActions();
            },

            bindUIActions: function(){
                s.commitsComment.addEventListener("click",function(){
                    JiraLinks.resolveJiraLinks();
                });
            },

            resolveJiraLinks: function(){
                alert('get jira links');
            }
        }

        if (addEventListener in document) { // use W3C standard method
            document.addEventListener('load', JiraLinks.init(), false);
        } else { // fall back to traditional method
            document.onload = JiraLinks.init();
        }
    </script>
</section>